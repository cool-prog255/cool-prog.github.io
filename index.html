<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Google 登入按鈕</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<style>
body { font-family: Arial; text-align: center; margin-top: 60px; }
#profile { margin-top: 20px; }
button {
    background-color: #4285F4;
    color: white;
    border: none;
    padding: 12px 24px;
    font-size: 16px;
    border-radius: 4px;
    cursor: pointer;
}
button:hover {
    background-color: #357ae8;
}
</style>
</head>
<body>

<h2>Google 登入按鈕示範</h2>

<button id="google-login-btn">使用 Google 登入</button>
<div id="profile"></div>

<script>
const CLIENT_ID = "YOUR_CLIENT_ID_HERE"; // 請替換成你的 Google OAuth Client ID

// 登入成功 callback
function handleCredentialResponse(response) {
    const token = response.credential;
    const payload = JSON.parse(atob(token.split('.')[1]));

    document.getElementById('profile').innerHTML = `
        <h3>登入成功</h3>
        <p>姓名：${payload.name}</p>
        <p>Email：${payload.email}</p>
        <img src="${payload.picture}" width="80" />
    `;
    console.log("Google ID Token:", token);
}

// 初始化 Google Identity Services
window.onload = function() {
    google.accounts.id.initialize({
        client_id: CLIENT_ID,
        callback: handleCredentialResponse,
        auto_select: false
    });
};

// 點按鈕觸發 popup 登入
document.getElementById('google-login-btn').addEventListener('click', () => {
    google.accounts.id.prompt((notification) => {
        if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
            alert("無法顯示登入 popup，請確認 OAuth 網址設定是否正確");
        }
    });
});
</script>

</body>
</html>
